<html ng-app="statsApp">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>
  	<script src="/js/main.js"></script>
  	<script src="angular-video/js/anguvideo.js"></script>
  	<script src="https://www.youtube.com/iframe_api"></script>
		<script src="angular-youtube-embed/src/angular-youtube-embed.js"></script>
    <link rel="stylesheet" type="text/css" href="/stylesheets/the.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/header.css">
  	<link rel="stylesheet" type="text/css" href="/stylesheets/scoreboard.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/record_stats.css">
  	<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" />

    <title>Quidstats</title>
	</head>

	<body ng-controller="StatsController">
    <header>
      <div class="nav">
        <ul>
          <li class="username"><a href="/"><%=get_user()%> </a></li>
          <li><a href="/record">Record Stats</a></li>
          <li><a href="/stats">View Stats</a></li>
          <li><a href="/watch" class="active">Watch Film</a></li>
          <li><a href="/add_team">Add Team</a></li>
          <li><a href="/add_video">Add Video</a></li>
          <li class="help"><a>Help</a></li>
        </ul>
      </div>
    </header>

    <div name="header" class="container-fluid text-center">
      <!-- Team Selector -->
      <select name="teamSelect" ng-model="team" ng-change="getDoneGames()">
        <option value="">Select a team</option>
        <% @teams.each do |team| %>
        <option value="<%= team['objectId']%>"><%=team['team_name']%></option>
        <%end%>
      </select>
      <!-- Video Selector and allPlayers populator--> 
      <select ng-model="vidObj" ng-change="getAllPlayers()" ng-options="game.vid_id+','+game.fall_year as game.description for game in doneGames">
      </select>
    </div>


    <!-- Video player object -->
    <div id="vidContainer" align="center">

      <div id="scoreboard">
        <div class="score">
          <p>HOME</p>
          <p ng-model="homeScore">{{homeScore}}</p>
        </div>
        <div class="score">
          <p>AWAY</p>
          <p ng-model="awayScore">{{awayScore}}</p>
        </div>
      </div>

      <div class="container-fluid video" align="center">
        <youtube-video video-id="selectedVideo" player="videoPlayer" class="embed-responsive-item" player-width="'100%'"></youtube-video>
      </div>

      <div class="container-fluid">
        <div id="statsList">
          <div class="statsListItem" ng-repeat="statObj in allStats" ng-click="seekToTime(statObj.time)" scroll-glue="glued">
            <p>{{statObj.player_name}}</p>
            <p>{{statObj.player_in_name}}</p>
            <p>{{statObj.stat_name}}</p>
            <div class="timeOnStatColumn">
              <!-- <p ng-click="adjustTime(-1, statObj.time, statObj.objectId)">-</p> -->
              <p>{{statObj.time | time:'ss':'mm:ss'}}</p>
              <!-- <p ng-click="adjustTime(1, statObj.time, statObj.objectId)">+</p> -->
            </div>
            <button class="btn btn-danger btn-xs" ng-click="deleteStat(statObj.objectId)">Delete</button>
          </div>
        </div>
        <!-- <button class="btn btn-xs" ng-click="glued = !glued">Toggle auto-scroll {{glued}}</button> -->
      </div>
    </div>

      <!-- Filters -->
    <div class="container-fluid">
      <div name="statsFilter">
        <p>Stats selector</p>
        <select>
          <option>Shots</option>
          <option>Goals</option>
          <option>Assists</option>
          <option>Turnovers</option>
          <option>Takeaways</option>
        </select>
      </div>

      <div name="playerFilter">
        <p>Player selector</p>
        <select>
          <option value="all">All Players</option>
          <option ng-repeat="player in allPlayers" value="{{player.objectId}}">{{player.first_name + ' ' + player.last_name}}</option>

    </div>

  </body>

</html>